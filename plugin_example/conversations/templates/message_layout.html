{% extends "base.html" %}

{% block content %}
    <div class="row">
        <div class="col-sm-3">
            <div class="card">
                <div class="card-header">
                    <a href="" class="btn btn-success">New Message</a>
                </div>
                <ul class="list-group list-group-flush">
                    <li class="list-group-item">
                        <a href="" >Inbox</a>
                    </li>
                    <li class="list-group-item">
                        <a href="" >Sent</a>
                    </li>
                    <li class="list-group-item active">
                        <a href="" >Drafts</a>
                    </li>
                    <li class="list-group-item">
                        <a href="" >Trash</a>
                    </li>
                </ul>
            </div><!--/.sidebar -->
        </div><!--/.col-sm-3 -->
        <div class="col-sm-9">
            {% block message_content %}
            {% endblock %}
        </div><!--/.col-sm-9 -->
    </div><!--/.row -->
{% endblock %}

{% block scripts %}
<script>
    // Reply conversation
    $('.reply-btn').click(function (event) {
        event.preventDefault();
        var message_id = $(this).attr('data-message-id');

        $.get('/conversations/message/' + message_id + '/raw', function(text) {
            var $contents = $('.flaskbb-editor');
            $contents.val(($contents.val() + '\n' + text).trim() + '\n');
            $contents.selectionStart = $contents.selectionEnd = $contents.val().length;
            $contents[0].scrollTop = $contents[0].scrollHeight;
            window.location.href = '#content';
        });
    });
</script>
{% endblock %}